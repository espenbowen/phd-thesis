\resizebox{\columnwidth}{!}{
\begin{tikzpicture}
  %\draw[step=1cm,gray,very thin] (0,0) grid (14,3);
  
  \draw[fill,gray,opacity=0.6] (3,0) rectangle (5,3);
  
  \draw[thick] (2,0) -- (2,3);
  \draw[thick] (6,0) -- (6,3);
  \draw[thick] (11,0) -- (11,3);

  \draw[thick] (0,0.) -- (4,1.5);
  \draw[thick] (4,1.5) -- (13,2.5);

  %point 1
  \draw[fill,blue] (2,0.7) circle [radius=2pt];
  \draw[thick,blue] (2,0.4) -- (2,1.);
  \draw[thick,blue] (1.9,0.4) -- (2.1,0.4);
  \draw[thick,blue] (1.9,1.) -- (2.1,1.);

  %point 2
  \draw[fill,blue] (6,1.7) circle [radius=2pt];
  \draw[thick,blue] (6,1.4) -- (6,2.);
  \draw[thick,blue] (5.9,1.4) -- (6.1,1.4);
  \draw[thick,blue] (5.9,2.) -- (6.1,2.);

  %point 3
  \draw[fill,blue] (11,2.5) circle [radius=2pt];
  \draw[thick,blue] (11,2.2) -- (11,2.8);
  \draw[thick,blue] (10.9,2.2) -- (11.1,2.2);
  \draw[thick,blue] (10.9,2.8) -- (11.1,2.8);

  %state 1
  \draw[thick] (2.2,0.5) -- (2.2,0.9);
  \draw[thick] (2.1,0.5) -- (2.3,0.5);
  \draw[thick] (2.1,0.9) -- (2.3,0.9);
  \draw[thick,->] (2.2,0.7) -- (2.5,0.8);

  % state 2 pred
  \draw[thick] (5.8,1.3) -- (5.8,2.5);
  \draw[thick] (5.7,1.3) -- (5.9,1.3);
  \draw[thick] (5.7,2.5) -- (5.9,2.5);
  \draw[thick,->] (5.8,1.9) -- (6.1,1.95);

  % state 2 
  \draw[thick] (6.2,1.5) -- (6.2,1.8);
  \draw[thick] (6.1,1.5) -- (6.3,1.5);
  \draw[thick] (6.3,1.8) -- (6.1,1.8);
  \draw[thick,->] (6.2,1.65) -- (6.5,1.68);

  % state 3 pred 
  \draw[thick] (10.8,1.8) -- (10.8,2.5);
  \draw[thick] (10.7,1.8) -- (10.9,1.8);
  \draw[thick] (10.7,2.5) -- (10.9,2.5);
  \draw[thick,->] (10.8,2.15) -- (11.1,2.2);

  % state 3 
  \draw[thick] (11.2,2.25) -- (11.2,2.5);
  \draw[thick] (11.1,2.25) -- (11.3,2.25);
  \draw[thick] (11.1,2.5) -- (11.3,2.5);
  \draw[thick,->] (11.2,2.375) -- (11.5,2.43);

  \draw[thick,dotted] (2.2,0.9) -- (4,1.6);
  \draw[thick,dotted] (2.2,0.5) -- (4,1.2);
  \draw[thick,dotted] (4,1.6) -- (5.8,2.5);
  \draw[thick,dotted] (4,1.2) -- (5.8,1.3);
  \draw[thick,dotted] (6.2,1.8) -- (10.8,2.5);
  \draw[thick,dotted] (6.2,1.5) -- (10.8,1.8);

  \node[draw=none] at (2.3,0.1){\tiny $z_{k-1}$};
  \node[draw=none] at (6.2,0.1){\tiny $z_{k}$};
  \node[draw=none] at (11.3,0.1){\tiny $z_{k+1}$};

  \node[draw=none] at (2.4,0.3){\tiny $\vec{x}_{k-1}$};
  \node[draw=none] at (5.7,2.7){\tiny $\vec{x}_{k}^{pred}$};
  \node[draw=none] at (6.3,1.3){\tiny $\vec{x}_{k}$};
  \node[draw=none] at (10.7,1.6){\tiny $\vec{x}_{k+1}^{pred}$};
  \node[draw=none] at (11.3,2.65){\tiny $\vec{x}_{k+1}$};

  \node[draw=none] at (4,0.1){\tiny Material};
        
    \end{tikzpicture}
}